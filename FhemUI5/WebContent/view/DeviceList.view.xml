<core:View controllerName="de.kjumybit.fhem.controller.DeviceList"
	xmlns:html="http://www.w3.org/1999/xhtml" 
	xmlns:core="sap.ui.core"
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.m" 
	xmlns:s="sap.m.semantic"
	displayBlock="true">
	<s:DetailPage id="viewDeviceList" title="{i18n>detailDeviceList}">
		<s:content>

			<Table id="tblDeviceList" 		
				   items="{ path: 'fhemMetaData>/DeviceSet',
				            sorter : {
								path : 'Internals/TYPE',
								group : true
							},
							groupHeaderFactory: '.grouper.getDeviceSetGroupHeader' 
						  }"
					headerText="Devices (nn)"
					inset="true"
					growing="true"
					growingScrollToLoad="true"
					backgroundDesign="Solid">
					<!-- class="sapUiResponsiveMargin"> -->					
				<columns>
					<Column witdh="auto">	
						<Text text="{i18n>device}" />
					</Column>					
					<Column>	
						<Text text="{i18n>state}" />
					</Column>
					<Column minScreenWidth="Tablet">	
						<Text text="{i18n>stateTime}" 
						/>
					</Column>								
				</columns>
				<items>
					<ColumnListItem>
						<cells>
							<ObjectIdentifier 
								title="{ parts:[{path:'fhemMetaData>Attributes/alias'},{path:'fhemMetaData>Name'}],
	    						    formatter: '.formatter.getDeviceName' 
	    					    }" />
							<Text text="{fhemMetaData>Internals/STATE}" />
							<Text text="{ path: 'fhemMetaData>Readings/state/Time',
								          type: 'sap.ui.model.type.DateTime', 
								          formatOptions: {
											source: { pattern: 'yyyy-MM-dd HH:mm:ss' }
										  }
							}" />
						</cells>
					</ColumnListItem>
				</items>
			</Table>

		</s:content> 
		<s:messagesIndicator>
			<s:MessagesIndicator press="onMessagesButtonPress"/>
		</s:messagesIndicator>
		<s:customFooterContent>
			<OverflowToolbarButton 
				icon="{= ${runtime>/fhemConnection/isConnected} ? 'sap-icon://connected' : 'sap-icon://disconnected'}"  
				type="{= ${runtime>/fhemConnection/isConnected} ? 'Accept' : 'Reject'}"/>
		</s:customFooterContent>
	</s:DetailPage>
</core:View>